// Mock data for Ranking page
export const MOCK_RANKINGS = [
    {
        username: "ProGamer123",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=ProGamer123",
        game_name: "Caro (High 5)",
        total_games: 150,
        wins: 120,
        total_score: 4500
    },
    {
        username: "ChessMaster",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=ChessMaster",
        game_name: "Cá» Vua",
        total_games: 200,
        wins: 145,
        total_score: 4350
    },
    {
        username: "TicTacPro",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=TicTacPro",
        game_name: "Tic-Tac-Toe",
        total_games: 180,
        wins: 125,
        total_score: 4200
    },
    {
        username: "GameNinja",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=GameNinja",
        game_name: "Caro (High 5)",
        total_games: 130,
        wins: 95,
        total_score: 3800
    },
    {
        username: "StrategyKing",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=StrategyKing",
        game_name: "Cá» Vua",
        total_games: 175,
        wins: 110,
        total_score: 3650
    },
    {
        username: "QuickThinker",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=QuickThinker",
        game_name: "Tic-Tac-Toe",
        total_games: 160,
        wins: 105,
        total_score: 3500
    },
    {
        username: "CaroLegend",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=CaroLegend",
        game_name: "Caro (High 5)",
        total_games: 145,
        wins: 98,
        total_score: 3400
    },
    {
        username: "ChessWarrior",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=ChessWarrior",
        game_name: "Cá» Vua",
        total_games: 155,
        wins: 92,
        total_score: 3250
    },
    {
        username: "FastPlayer",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=FastPlayer",
        game_name: "Tic-Tac-Toe",
        total_games: 140,
        wins: 88,
        total_score: 3100
    },
    {
        username: "GameMaster99",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=GameMaster99",
        game_name: "Caro (High 5)",
        total_games: 125,
        wins: 80,
        total_score: 2950
    },
    {
        username: "TacticalGenius",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=TacticalGenius",
        game_name: "Cá» Vua",
        total_games: 135,
        wins: 85,
        total_score: 2850
    },
    {
        username: "SpeedRunner",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=SpeedRunner",
        game_name: "Tic-Tac-Toe",
        total_games: 120,
        wins: 75,
        total_score: 2700
    },
    {
        username: "CaroChampion",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=CaroChampion",
        game_name: "Caro (High 5)",
        total_games: 110,
        wins: 70,
        total_score: 2550
    },
    {
        username: "ChessExpert",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=ChessExpert",
        game_name: "Cá» Vua",
        total_games: 115,
        wins: 68,
        total_score: 2400
    },
    {
        username: "TicTacAce",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=TicTacAce",
        game_name: "Tic-Tac-Toe",
        total_games: 105,
        wins: 65,
        total_score: 2250
    }
];

// Mock data for friends rankings
export const MOCK_FRIENDS_RANKINGS = [
    {
        username: "BestFriend",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=BestFriend",
        game_name: "Caro (High 5)",
        total_games: 95,
        wins: 70,
        total_score: 2800
    },
    {
        username: "GamingBuddy",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=GamingBuddy",
        game_name: "Cá» Vua",
        total_games: 88,
        wins: 60,
        total_score: 2500
    },
    {
        username: "TeamMate",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=TeamMate",
        game_name: "Tic-Tac-Toe",
        total_games: 75,
        wins: 50,
        total_score: 2100
    },
    {
        username: "OldFriend",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=OldFriend",
        game_name: "Caro (High 5)",
        total_games: 65,
        wins: 42,
        total_score: 1850
    },
    {
        username: "Classmate",
        avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=Classmate",
        game_name: "Cá» Vua",
        total_games: 58,
        wins: 38,
        total_score: 1600
    }
];

// Games list
export const GAMES = [
    { id: 'all', name: 'All Games', icon: 'ðŸŽ®' },
    { id: 'caro4', name: 'Caro 4', icon: 'â­•' },
    { id: 'caro5', name: 'Caro 5', icon: 'âŒ' },
    { id: 'line', name: 'Line', icon: 'ðŸ“' },
    { id: 'mem', name: 'Memory', icon: 'ðŸ§ ' },
    { id: 'paint', name: 'Paint', icon: 'ðŸŽ¨' },
    { id: 'snake', name: 'Snake', icon: 'ðŸ' },
    { id: 'tictactoe', name: 'Tic-Tac-Toe', icon: 'âš”ï¸' }
];

// Mock user stats per game for achievements calculation
export const MOCK_USER_STATS_BY_GAME = {
    caro4: {
        total_games: 45,
        wins: 35,
        total_score: 1200,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    caro5: {
        total_games: 38,
        wins: 28,
        total_score: 980,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    line: {
        total_games: 25,
        wins: 18,
        total_score: 650,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    mem: {
        total_games: 15,
        wins: 12,
        total_score: 420,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    paint: {
        total_games: 8,
        wins: 5,
        total_score: 180,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    snake: {
        total_games: 12,
        wins: 8,
        total_score: 350,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    },
    tictactoe: {
        total_games: 7,
        wins: 14,
        total_score: 720,
        get winRate() { return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0; }
    }
};

// Mock user stats for achievements calculation (aggregated)
export const MOCK_USER_STATS = {
    username: "ProGamer123",
    avatar_url: "https://api.dicebear.com/7.x/avataaars/svg?seed=ProGamer123",
    total_games: 150,
    wins: 120,
    total_score: 4500,
    get winRate() {
        return this.total_games > 0 ? (this.wins / this.total_games) * 100 : 0;
    }
};

// Helper to get stats for a specific game or all games
export const getStatsForGame = (gameId) => {
    if (gameId === 'all') {
        return MOCK_USER_STATS;
    }
    return MOCK_USER_STATS_BY_GAME[gameId] || { total_games: 0, wins: 0, total_score: 0, winRate: 0 };
};

// Achievement definitions with unlock conditions
// Global achievements (apply to all games combined)
export const GLOBAL_ACHIEVEMENTS = [
    // Win-based achievements
    {
        id: 'first_win',
        type: 'wins',
        title: 'First Victory',
        description: 'Win your first match',
        icon: 'trophy',
        condition: (stats) => stats.wins >= 1,
        requirement: 1,
        category: 'wins',
        game: 'all'
    },
    {
        id: 'win_10',
        type: 'wins',
        title: 'Warrior',
        description: 'Win 10 matches',
        icon: 'trophy',
        condition: (stats) => stats.wins >= 10,
        requirement: 10,
        category: 'wins',
        game: 'all'
    },
    {
        id: 'win_50',
        type: 'wins',
        title: 'Champion',
        description: 'Win 50 matches',
        icon: 'trophy',
        condition: (stats) => stats.wins >= 50,
        requirement: 50,
        category: 'wins',
        game: 'all'
    },
    {
        id: 'win_100',
        type: 'wins',
        title: 'Victory Legend',
        description: 'Win 100 matches',
        icon: 'trophy',
        condition: (stats) => stats.wins >= 100,
        requirement: 100,
        category: 'wins',
        game: 'all'
    },

    // Match-based achievements
    {
        id: 'match_1',
        type: 'matches',
        title: 'Newcomer',
        description: 'Complete your first match',
        icon: 'gamepad',
        condition: (stats) => stats.total_games >= 1,
        requirement: 1,
        category: 'matches',
        game: 'all'
    },
    {
        id: 'match_10',
        type: 'matches',
        title: 'Dedicated Player',
        description: 'Complete 10 matches',
        icon: 'gamepad',
        condition: (stats) => stats.total_games >= 10,
        requirement: 10,
        category: 'matches',
        game: 'all'
    },
    {
        id: 'match_50',
        type: 'matches',
        title: 'Veteran',
        description: 'Complete 50 matches',
        icon: 'gamepad',
        condition: (stats) => stats.total_games >= 50,
        requirement: 50,
        category: 'matches',
        game: 'all'
    },
    {
        id: 'match_100',
        type: 'matches',
        title: 'Game Master',
        description: 'Complete 100 matches',
        icon: 'gamepad',
        condition: (stats) => stats.total_games >= 100,
        requirement: 100,
        category: 'matches',
        game: 'all'
    },
    {
        id: 'match_200',
        type: 'matches',
        title: 'Legend',
        description: 'Complete 200 matches',
        icon: 'gamepad',
        condition: (stats) => stats.total_games >= 200,
        requirement: 200,
        category: 'matches',
        game: 'all'
    },

    // Win rate achievements
    {
        id: 'winrate_50',
        type: 'winrate',
        title: 'Balanced',
        description: 'Achieve 50% win rate (min 10 matches)',
        icon: 'percent',
        condition: (stats) => stats.total_games >= 10 && stats.winRate >= 50,
        requirement: 50,
        category: 'winrate',
        game: 'all'
    },
    {
        id: 'winrate_60',
        type: 'winrate',
        title: 'Tactician',
        description: 'Achieve 60% win rate (min 20 matches)',
        icon: 'percent',
        condition: (stats) => stats.total_games >= 20 && stats.winRate >= 60,
        requirement: 60,
        category: 'winrate',
        game: 'all'
    },
    {
        id: 'winrate_70',
        type: 'winrate',
        title: 'Expert',
        description: 'Achieve 70% win rate (min 30 matches)',
        icon: 'percent',
        condition: (stats) => stats.total_games >= 30 && stats.winRate >= 70,
        requirement: 70,
        category: 'winrate',
        game: 'all'
    },
    {
        id: 'winrate_80',
        type: 'winrate',
        title: 'Unbeatable',
        description: 'Achieve 80% win rate (min 50 matches)',
        icon: 'percent',
        condition: (stats) => stats.total_games >= 50 && stats.winRate >= 80,
        requirement: 80,
        category: 'winrate',
        game: 'all'
    },

    // Score-based achievements
    {
        id: 'score_100',
        type: 'score',
        title: 'Getting Started',
        description: 'Reach 100 points',
        icon: 'star',
        condition: (stats) => stats.total_score >= 100,
        requirement: 100,
        category: 'score',
        game: 'all'
    },
    {
        id: 'score_500',
        type: 'score',
        title: 'Collector',
        description: 'Reach 500 points',
        icon: 'star',
        condition: (stats) => stats.total_score >= 500,
        requirement: 500,
        category: 'score',
        game: 'all'
    },
    {
        id: 'score_1000',
        type: 'score',
        title: 'Expert',
        description: 'Reach 1,000 points',
        icon: 'star',
        condition: (stats) => stats.total_score >= 1000,
        requirement: 1000,
        category: 'score',
        game: 'all'
    },
    {
        id: 'score_2500',
        type: 'score',
        title: 'Superstar',
        description: 'Reach 2,500 points',
        icon: 'star',
        condition: (stats) => stats.total_score >= 2500,
        requirement: 2500,
        category: 'score',
        game: 'all'
    },
    {
        id: 'score_5000',
        type: 'score',
        title: 'Score Legend',
        description: 'Reach 5,000 points',
        icon: 'star',
        condition: (stats) => stats.total_score >= 5000,
        requirement: 5000,
        category: 'score',
        game: 'all'
    }
];

// Game-specific achievements (5 per game)
export const GAME_ACHIEVEMENTS = [
    // Caro 4 achievements (5)
    { id: 'caro4_first', type: 'wins', title: 'Caro 4 Beginner', description: 'Win your first Caro 4 match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'caro4' },
    { id: 'caro4_win_10', type: 'wins', title: 'Caro 4 Master', description: 'Win 10 Caro 4 matches', icon: 'trophy', condition: (stats) => stats.wins >= 10, requirement: 10, category: 'wins', game: 'caro4' },
    { id: 'caro4_win_25', type: 'wins', title: 'Caro 4 Legend', description: 'Win 25 Caro 4 matches', icon: 'trophy', condition: (stats) => stats.wins >= 25, requirement: 25, category: 'wins', game: 'caro4' },
    { id: 'caro4_match_20', type: 'matches', title: 'Caro 4 Fan', description: 'Play 20 Caro 4 matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 20, requirement: 20, category: 'matches', game: 'caro4' },
    { id: 'caro4_score_500', type: 'score', title: 'Caro 4 High Score', description: 'Reach 500 points in Caro 4', icon: 'star', condition: (stats) => stats.total_score >= 500, requirement: 500, category: 'score', game: 'caro4' },
    
    // Caro 5 achievements (5)
    { id: 'caro5_first', type: 'wins', title: 'Caro 5 Beginner', description: 'Win your first Caro 5 match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'caro5' },
    { id: 'caro5_win_10', type: 'wins', title: 'Caro 5 Master', description: 'Win 10 Caro 5 matches', icon: 'trophy', condition: (stats) => stats.wins >= 10, requirement: 10, category: 'wins', game: 'caro5' },
    { id: 'caro5_win_25', type: 'wins', title: 'Caro 5 Legend', description: 'Win 25 Caro 5 matches', icon: 'trophy', condition: (stats) => stats.wins >= 25, requirement: 25, category: 'wins', game: 'caro5' },
    { id: 'caro5_match_20', type: 'matches', title: 'Caro 5 Fan', description: 'Play 20 Caro 5 matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 20, requirement: 20, category: 'matches', game: 'caro5' },
    { id: 'caro5_score_500', type: 'score', title: 'Caro 5 High Score', description: 'Reach 500 points in Caro 5', icon: 'star', condition: (stats) => stats.total_score >= 500, requirement: 500, category: 'score', game: 'caro5' },
    
    // Line achievements (5)
    { id: 'line_first', type: 'wins', title: 'Line Beginner', description: 'Win your first Line match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'line' },
    { id: 'line_win_10', type: 'wins', title: 'Line Master', description: 'Win 10 Line matches', icon: 'trophy', condition: (stats) => stats.wins >= 10, requirement: 10, category: 'wins', game: 'line' },
    { id: 'line_win_15', type: 'wins', title: 'Line Legend', description: 'Win 15 Line matches', icon: 'trophy', condition: (stats) => stats.wins >= 15, requirement: 15, category: 'wins', game: 'line' },
    { id: 'line_match_15', type: 'matches', title: 'Line Fan', description: 'Play 15 Line matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 15, requirement: 15, category: 'matches', game: 'line' },
    { id: 'line_score_300', type: 'score', title: 'Line High Score', description: 'Reach 300 points in Line', icon: 'star', condition: (stats) => stats.total_score >= 300, requirement: 300, category: 'score', game: 'line' },
    
    // Memory achievements (5)
    { id: 'mem_first', type: 'wins', title: 'Good Memory', description: 'Win your first Memory match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'mem' },
    { id: 'mem_win_5', type: 'wins', title: 'Super Memory', description: 'Win 5 Memory matches', icon: 'trophy', condition: (stats) => stats.wins >= 5, requirement: 5, category: 'wins', game: 'mem' },
    { id: 'mem_win_10', type: 'wins', title: 'Memory Master', description: 'Win 10 Memory matches', icon: 'trophy', condition: (stats) => stats.wins >= 10, requirement: 10, category: 'wins', game: 'mem' },
    { id: 'mem_match_10', type: 'matches', title: 'Memory Fan', description: 'Play 10 Memory matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 10, requirement: 10, category: 'matches', game: 'mem' },
    { id: 'mem_score_200', type: 'score', title: 'Memory High Score', description: 'Reach 200 points in Memory', icon: 'star', condition: (stats) => stats.total_score >= 200, requirement: 200, category: 'score', game: 'mem' },
    
    // Paint achievements (5)
    { id: 'paint_first', type: 'wins', title: 'New Artist', description: 'Complete your first Paint match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'paint' },
    { id: 'paint_win_3', type: 'wins', title: 'Amateur Artist', description: 'Win 3 Paint matches', icon: 'trophy', condition: (stats) => stats.wins >= 3, requirement: 3, category: 'wins', game: 'paint' },
    { id: 'paint_win_5', type: 'wins', title: 'Talented Artist', description: 'Win 5 Paint matches', icon: 'trophy', condition: (stats) => stats.wins >= 5, requirement: 5, category: 'wins', game: 'paint' },
    { id: 'paint_match_5', type: 'matches', title: 'Paint Fan', description: 'Play 5 Paint matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 5, requirement: 5, category: 'matches', game: 'paint' },
    { id: 'paint_score_100', type: 'score', title: 'Paint High Score', description: 'Reach 100 points in Paint', icon: 'star', condition: (stats) => stats.total_score >= 100, requirement: 100, category: 'score', game: 'paint' },
    
    // Snake achievements (5)
    { id: 'snake_first', type: 'wins', title: 'Baby Snake', description: 'Complete your first Snake match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'snake' },
    { id: 'snake_win_5', type: 'wins', title: 'Hungry Snake', description: 'Win 5 Snake matches', icon: 'trophy', condition: (stats) => stats.wins >= 5, requirement: 5, category: 'wins', game: 'snake' },
    { id: 'snake_win_8', type: 'wins', title: 'Snake Master', description: 'Win 8 Snake matches', icon: 'trophy', condition: (stats) => stats.wins >= 8, requirement: 8, category: 'wins', game: 'snake' },
    { id: 'snake_match_10', type: 'matches', title: 'Snake Fan', description: 'Play 10 Snake matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 10, requirement: 10, category: 'matches', game: 'snake' },
    { id: 'snake_score_200', type: 'score', title: 'Snake High Score', description: 'Reach 200 points in Snake', icon: 'star', condition: (stats) => stats.total_score >= 200, requirement: 200, category: 'score', game: 'snake' },
    
    // Tic-Tac-Toe achievements (5)
    { id: 'ttt_first', type: 'wins', title: 'X or O', description: 'Win your first Tic-Tac-Toe match', icon: 'trophy', condition: (stats) => stats.wins >= 1, requirement: 1, category: 'wins', game: 'tictactoe' },
    { id: 'ttt_win_10', type: 'wins', title: 'Tic-Tac-Toe Master', description: 'Win 10 Tic-Tac-Toe matches', icon: 'trophy', condition: (stats) => stats.wins >= 10, requirement: 10, category: 'wins', game: 'tictactoe' },
    { id: 'ttt_win_20', type: 'wins', title: 'Tic-Tac-Toe Legend', description: 'Win 20 Tic-Tac-Toe matches', icon: 'trophy', condition: (stats) => stats.wins >= 20, requirement: 20, category: 'wins', game: 'tictactoe' },
    { id: 'ttt_match_15', type: 'matches', title: 'Tic-Tac-Toe Fan', description: 'Play 15 Tic-Tac-Toe matches', icon: 'gamepad', condition: (stats) => stats.total_games >= 15, requirement: 15, category: 'matches', game: 'tictactoe' },
    { id: 'ttt_score_400', type: 'score', title: 'Tic-Tac-Toe High Score', description: 'Reach 400 points in Tic-Tac-Toe', icon: 'star', condition: (stats) => stats.total_score >= 400, requirement: 400, category: 'score', game: 'tictactoe' }
];

// Combined achievements
export const ACHIEVEMENT_DEFINITIONS = [...GLOBAL_ACHIEVEMENTS, ...GAME_ACHIEVEMENTS];

// Helper function to get user achievements based on stats and game filter
export const getUserAchievements = (selectedGame = 'all') => {
    const now = new Date();
    
    // Filter achievements by game
    const filteredAchievements = selectedGame === 'all' 
        ? ACHIEVEMENT_DEFINITIONS 
        : ACHIEVEMENT_DEFINITIONS.filter(a => a.game === selectedGame || a.game === 'all');
    
    return filteredAchievements.map(achievement => {
        // Get the appropriate stats for this achievement
        const stats = getStatsForGame(achievement.game);
        const unlocked = achievement.condition(stats);
        
        return {
            ...achievement,
            unlocked,
            unlockedAt: unlocked ? now.toISOString() : null,
            progress: getAchievementProgress(achievement, stats)
        };
    });
};

// Helper function to get achievements for a specific game only
export const getGameSpecificAchievements = (gameId) => {
    const now = new Date();
    const gameAchievements = ACHIEVEMENT_DEFINITIONS.filter(a => a.game === gameId);
    const stats = getStatsForGame(gameId);
    
    return gameAchievements.map(achievement => ({
        ...achievement,
        unlocked: achievement.condition(stats),
        unlockedAt: achievement.condition(stats) ? now.toISOString() : null,
        progress: getAchievementProgress(achievement, stats)
    }));
};

// Helper function to calculate progress for each achievement
const getAchievementProgress = (achievement, stats) => {
    switch (achievement.category) {
        case 'wins':
            return Math.min((stats.wins / achievement.requirement) * 100, 100);
        case 'matches':
            return Math.min((stats.total_games / achievement.requirement) * 100, 100);
        case 'winrate':
            if (stats.total_games < 10) return (stats.total_games / 10) * 50;
            return Math.min((stats.winRate / achievement.requirement) * 100, 100);
        case 'score':
            return Math.min((stats.total_score / achievement.requirement) * 100, 100);
        default:
            return 0;
    }
};
